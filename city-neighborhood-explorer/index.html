<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City Neighborhoods Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Custom styles to complement Tailwind */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Tailwind gray-100 */
        }
        /* Custom scrollbar for a cleaner look (optional, for the main browser scrollbar) */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; /* Softer track */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; /* Tailwind slate-300 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; /* Tailwind slate-500 */
        }
        .content-area h2 { /* Main neighborhood name */
            border-bottom: 2px solid #e5e7eb; /* Tailwind gray-200 */
        }
        .content-area .section { /* Individual content section (History, Art, etc.) */
            border-left: 4px solid #3b82f6; /* Tailwind blue-500 */
            background-color: #f9fafb; /* Tailwind gray-50 */
        }
        .content-area .section h3 { /* Section titles like "History" */
            color: #1e40af; /* Tailwind blue-800 */
        }
        /* Ensuring select dropdown arrows are visible and styled consistently */
        select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%236b7280%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 0.7rem center;
            background-size: 0.65em auto;
            padding-right: 2.5rem; /* Make space for the arrow */
        }
    </style>
</head>
<body class="min-h-screen flex justify-center p-4 bg-gradient-to-br from-slate-100 to-sky-100">
    <main class="container bg-white shadow-2xl rounded-xl w-full max-w-3xl mx-auto flex flex-col my-8 overflow-hidden">
        <div class="top-panel flex-shrink-0 px-6 md:px-8 pt-6 md:pt-8">
            <header class="mb-6 md:mb-8 text-center">
                <div class="flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-7 h-7 mr-2 text-blue-700">
                        <path fill-rule="evenodd" d="M11.54 22.351l.07.04.028.016a.76.76 0 00.723 0l.028-.015.071-.041a16.975 16.975 0 001.144-.742 19.58 19.58 0 002.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 00-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 002.682 2.282 16.975 16.975 0 001.145.742zM12 13.5a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
                    </svg>
                    <h1 id="main-title" class="text-2xl md:text-3xl font-bold text-blue-800">
                        City Neighborhoods Explorer
                    </h1>
                </div>
            </header>

            <div class="controls grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 pb-6 border-b border-slate-200">
                <div>
                    <label for="level1-dropdown" class="block text-sm font-medium text-slate-700 mb-1">City:</label>
                    <select id="level1-dropdown" class="w-full p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out bg-white text-slate-700">
                        <option value="" class="text-slate-500">-- Select City --</option>
                    </select>
                </div>
                <div>
                    <label for="level2-dropdown" class="block text-sm font-medium text-slate-700 mb-1">Neighborhood:</label>
                    <select id="level2-dropdown" disabled class="w-full p-3 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out bg-white text-slate-700 disabled:bg-slate-50 disabled:text-slate-400">
                        <option value="" class="text-slate-500">-- Select Neighborhood --</option>
                    </select>
                </div>
            </div>
        </div>

        <div id="content-area" class="content-area space-y-6 px-6 md:px-8 py-6">
            <p id="initial-message" class="text-slate-600 italic text-center py-8">Please select a city and then a neighborhood to see details.</p>
            </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- EMBEDDED DATA ---
            // This data structure holds all the information for the explorer.
            // - appTitle: Sets the overall title of the application.
            // - level1Label: Label for the first dropdown (e.g., "City").
            // - level2Label: Label for the second dropdown (e.g., "Neighborhood").
            // - level1Items: An object containing an array of items for the first dropdown. Each item has an 'id' and 'name'.
            // - level2Items: An object containing an array of items for the second dropdown.
            //   - Each item has an 'id', 'name', 'sectionProperties' (an array defining the order and names of data fields in each section), and 'sections'.
            //   - 'sections' is an array of objects, where each object represents a content section (e.g., History, Attractions).
            //     The keys in these section objects should match the values in 'sectionProperties'.
            const currentExplorerData = {
                appTitle: "City Neighborhoods Explorer", // This is used by JS to set the HTML title element
                level1Label: "City",
                level2Label: "Neighborhood",
                level1Items: {
                    "items": [
                        { "id": "1", "name": "Paris" },
                        { "id": "2", "name": "London" },
                        { "id": "3", "name": "New York City" }
                    ]
                },
                level2Items: {
                    "items": [
                        {
                            "id": "1a", "name": "Montmartre", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "History", "content": "Montmartre is known for its artistic history and the white-domed Basilica of the Sacré-Cœur. The area developed outside the city limits of Paris, and became a popular spot for drinking and entertainment during the Belle Époque.", "tips": "Visit the Musée de Montmartre to learn about the area's bohemian past and see where artists like Renoir once lived and worked." },
                                { "title": "Attractions", "content": "Visit the iconic Sacré-Cœur Basilica for stunning city views, explore Place du Tertre where artists set up their easels, and see the famous Moulin Rouge in the adjacent district.", "tips": "Arrive at Sacré-Cœur early in the morning or during weekdays to avoid crowds. The view from the dome (additional fee) is worth the climb." },
                                { "title": "Getting Around", "content": "Montmartre can be reached via metro lines 2 and 12. The hillside neighborhood is best explored on foot, though you may want to take the funicular to avoid climbing the steep stairs to the basilica.", "tips": "Purchase a carnet of metro tickets to save money. Consider taking the funicular up and walking down to enjoy the scenic streets and hidden staircases." }
                            ]
                        },
                        {
                            "id": "1b", "name": "Le Marais", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "History", "content": "Le Marais is one of Paris's oldest neighborhoods, once home to French nobility. After the Revolution, it became a working-class district before evolving into the trendy area it is today, known for preserving much of its pre-revolutionary architecture.", "tips": "Join a guided walking tour to learn about the hidden historical details in the architecture and courtyards not obvious to casual visitors." },
                                { "title": "Culture", "content": "Le Marais is home to Paris's Jewish quarter and LGBTQ+ community. It houses several important museums including the Picasso Museum and the Centre Pompidou is nearby.", "tips": "Purchase a Paris Museum Pass if planning to visit multiple museums. The Picasso Museum is less crowded in the late afternoon." },
                                { "title": "Shopping & Dining", "content": "Known for boutique shopping, the area features designer stores, vintage shops, and artisanal food markets. The neighborhood is also famous for its falafel stands and trendy cafés.", "tips": "L'As du Fallafel on Rue des Rosiers is the most famous falafel shop, but the line can be long. Try Miznon or King Falafel Palace nearby for equally delicious alternatives with shorter waits." }
                            ]
                        },
                        {
                            "id": "1c", "name": "Saint-Germain-des-Prés", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "History", "content": "Saint-Germain-des-Prés, centered around the oldest church in Paris, was once a creative hub for existentialist philosophers and literary giants like Sartre, de Beauvoir, and Hemingway. It was the epicenter of intellectual Paris during the post-WWII era.", "tips": "Visit Café de Flore and Les Deux Magots to sit where famous philosophers and writers once debated. The staff at these historic cafés can often point out which tables were frequented by which intellectuals." },
                                { "title": "Arts & Literature", "content": "While now more upscale than in its bohemian heyday, the neighborhood retains its literary character with numerous bookshops, galleries, and publishing houses. The École des Beaux-Arts continues to attract aspiring artists from around the world.", "tips": "For English-language books, visit the famous Shakespeare and Company bookstore nearby. Every Sunday at 5pm, they often host free readings by published and emerging writers." },
                                { "title": "Shopping & Dining", "content": "Today's Saint-Germain houses high-end fashion boutiques, antique dealers, and renowned chocolatiers and patisseries. The neighborhood is home to the oldest department store in Paris, Le Bon Marché, and its gourmet food hall, La Grande Épicerie.", "tips": "Visit Pierre Hermé on rue Bonaparte for innovative macarons. For an authentic market experience, the open-air Marché Biologique Raspail (organic market) operates on Sundays along Boulevard Raspail." }
                            ]
                        },
                        {
                            "id": "1d", "name": "Canal Saint-Martin", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "Overview", "content": "The Canal Saint-Martin area has transformed from a working-class industrial zone to one of Paris's trendiest neighborhoods. The 4.5km canal, built in 1825 under Napoleon to supply fresh water to Paris, now serves as a picturesque gathering spot for locals.", "tips": "The most scenic stretch of the canal is between Place de la République and Rue du Faubourg du Temple, where iron footbridges cross the water and locals gather on the stone banks." },
                                { "title": "Local Life", "content": "Young Parisians flock to the canal's banks on sunny days for impromptu picnics. The area has become a creative district filled with artisanal shops, craft breweries, independent fashion boutiques, and design studios.", "tips": "Join the locals for an evening 'apéro' (pre-dinner drinks and snacks) along the canal banks. Bring a bottle of wine, some cheese, and a baguette from nearby shops for an authentic Parisian experience." },
                                { "title": "Food & Entertainment", "content": "The neighborhood boasts some of the city's most inventive restaurants and bars, with new venues opening regularly. Hidden speakeasies, specialty coffee shops, and international street food sit alongside traditional bistros.", "tips": "Chez Prune is an iconic canal-side café perfect for people-watching. For excellent bread and pastries, visit Du Pain et des Idées on rue Yves Toudic, one of Paris's most celebrated bakeries (closed weekends)." }
                            ]
                        },
                        {
                            "id": "1e", "name": "Belleville", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "Cultural Mix", "content": "Belleville represents one of Paris's most multicultural neighborhoods, with significant Chinese, North African, and Jewish communities. This diversity creates a vibrant atmosphere reflected in its bustling markets, authentic restaurants, and community festivals.", "tips": "Visit Rue de Belleville for Chinese supermarkets and restaurants, and Rue des Envierges for North African specialties. The neighborhood feels most alive on Tuesday and Friday mornings when the Belleville Market takes over Boulevard de Belleville." },
                                { "title": "Arts Scene", "content": "Artists have flocked to Belleville for its affordable studios and dynamic energy. The area is now home to numerous galleries, street art, and the annual Portes Ouvertes event where artists open their studios to the public.", "tips": "Follow the street art trail along Rue Denoyez and through the neighborhood's hidden passages. Visit Aux Folies café, once frequented by Edith Piaf who grew up in the neighborhood." },
                                { "title": "Parks & Views", "content": "Parc de Belleville offers one of the highest and least crowded panoramic views of Paris. The neighborhood sits on a hill that provides surprising vistas at the end of narrow streets, with stairs climbing up the incline throughout the area.", "tips": "For the best sunset views of Paris, head to the top of Parc de Belleville around 30 minutes before sunset. Bring a picnic and arrive early during summer months to secure a good spot on the grass." }
                            ]
                        },
                        {
                            "id": "2a", "name": "Notting Hill", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "Overview", "content": "Notting Hill is an affluent and fashionable district known for its colorful houses, upscale shopping, and the famous Portobello Road Market. It gained additional fame from the 1999 film of the same name.", "tips": "For fans of the movie, visit the blue door at 280 Westbourne Park Road and the travel bookshop at 13 Blenheim Crescent that inspired the film." },
                                { "title": "Portobello Road", "content": "Portobello Road Market is one of London's most notable street markets, known for antiques, vintage fashion, and fresh produce. The market is busiest on Saturdays when antique dealers set up their stalls.", "tips": "Arrive before 11am on Saturdays to browse antiques before the crowds. Friday is better for fashion finds, while weekdays are more relaxed for exploring the permanent shops." },
                                { "title": "Notting Hill Carnival", "content": "Every August Bank Holiday, the neighborhood hosts the Notting Hill Carnival, Europe's biggest street festival celebrating Caribbean culture with colorful parades, music, dancing, and food.", "tips": "Sunday (Family Day) is more relaxed and better for families with children, while Monday tends to be more crowded and energetic. Wear comfortable shoes and bring water." }
                            ]
                        },
                        {
                            "id": "2b", "name": "Shoreditch", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "History", "content": "Once a working-class area, Shoreditch has transformed into one of London's most creative and trendy neighborhoods. It began gentrifying in the 1990s when artists and creatives were drawn to its affordable spaces.", "tips": "The area changes rapidly - even recent guidebooks might be outdated. Follow @spitalfieldslife or @shoreditchstreetart on social media for current happenings." },
                                { "title": "Street Art", "content": "Shoreditch is famous for its ever-changing street art scene. Works by Banksy and other renowned street artists have appeared on its walls, making the neighborhood an open-air gallery.", "tips": "Take a street art walking tour or use a street art app to locate the best murals. Brick Lane, Redchurch Street, and Fashion Street have some of the best examples." },
                                { "title": "Nightlife & Dining", "content": "The area is packed with innovative restaurants, craft cocktail bars, and nightclubs. Brick Lane is famous for its curry houses, while Boxpark offers street food in shipping containers, and the Old Truman Brewery hosts various events and markets.", "tips": "Restaurants in Shoreditch fill up quickly - book in advance for dinner. For curry on Brick Lane, look for restaurants filled with local diners rather than those with touts outside." }
                            ]
                        },
                        {
                            "id": "2c", "name": "Camden Town", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "Alternative Culture", "content": "Camden Town is renowned for its alternative culture, punk heritage, and eclectic street style. Since the 1970s, it's been a center for alternative music and fashion, maintaining its rebellious spirit despite increasing commercialization.", "tips": "The striking Amy Winehouse statue at Stables Market pays tribute to the local icon. Fans should also visit Dublin Castle pub where she performed before becoming famous." },
                                { "title": "Markets", "content": "Camden Market is actually a collection of adjoining markets including Camden Lock, Stables Market, and Buck Street Market. Together they form one of London's most popular shopping destinations, offering everything from vintage clothing to international street food.", "tips": "Visit on weekdays to avoid the crushing weekend crowds. The canopied area near the lock has some of the best food stalls - look for the ones with the longest queues of locals." },
                                { "title": "Music Scene", "content": "Camden remains an important hub for live music, with legendary venues like The Roundhouse, Electric Ballroom, and Jazz Cafe hosting both established acts and emerging talent. Many famous British bands got their start playing Camden's pubs and clubs.", "tips": "Check Time Out London for current gigs. The Dublin Castle and Dingwalls (now PowerHaus) are historic venues where you might catch tomorrow's big acts in intimate settings." }
                            ]
                        },
                        {
                            "id": "2d", "name": "South Bank", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "Culture & Arts", "content": "The South Bank is London's premier cultural district, home to the Southbank Centre (including Royal Festival Hall), the National Theatre, the BFI Film Centre, and Tate Modern. This riverside stretch hosts countless festivals, exhibitions, and performances throughout the year.", "tips": "Check for free events at the Southbank Centre - there are often performances in the public spaces. The Royal Festival Hall allows visitors to sit in on orchestra rehearsals for free on selected days." },
                                { "title": "Riverside Attractions", "content": "Walking along the Thames Path from Westminster Bridge to Tower Bridge offers views of London's most iconic landmarks. Highlights include the London Eye, Shakespeare's Globe Theatre, Borough Market, and the towering Shard skyscraper.", "tips": "The walk between Westminster and Tower Bridge takes about an hour without stops, but allow at least half a day to explore properly. For the best photographs of St. Paul's Cathedral, walk across the Millennium Bridge." },
                                { "title": "Food & Leisure", "content": "The area offers diverse dining options from street food under Waterloo Bridge to upscale restaurants with river views. The South Bank transforms seasonally, hosting a summer festival, autumn literature events, and a charming Christmas market in winter.", "tips": "For budget-friendly eating with amazing views, grab food from the vendors behind the Royal Festival Hall and eat on the terraces overlooking the Thames. Visit Borough Market (Thursday-Saturday) for London's best food market." }
                            ]
                        },
                        {
                            "id": "2e", "name": "Hampstead", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "Village Feel", "content": "Despite being just four miles from central London, Hampstead retains a distinct village atmosphere with its Georgian and Victorian architecture, winding lanes, and traditional pubs. The area has been home to numerous writers, artists, and intellectuals throughout its history.", "tips": "Take a guided walking tour to see the homes of former residents including John Keats, George Orwell, and Sigmund Freud. The small Hampstead Museum in Burgh House offers insight into the area's artistic heritage." },
                                { "title": "Hampstead Heath", "content": "Hampstead Heath is an 800-acre ancient parkland with meadows, woods, and swimming ponds. Parliament Hill offers spectacular panoramic views of London's skyline, while Kenwood House presents a fine art collection in an elegant setting with free admission.", "tips": "The men's, women's, and mixed swimming ponds are open year-round, though only the bravest swim during winter. For a quintessential English experience, pack a picnic from Hampstead High Street shops and head to the Heath on a sunny day." },
                                { "title": "Arts & Leisure", "content": "Hampstead maintains its cultural significance with independent bookshops, art galleries, and the historic Everyman Cinema. The area's cafés and gastro-pubs provide cozy retreats, particularly charming during autumn and winter months.", "tips": "Visit the Holly Bush or the Spaniards Inn, historic pubs once frequented by literary figures including Dickens and Byron. During summer, don't miss the open-air concerts and theater performances on the Heath." }
                            ]
                        },
                        {
                            "id": "3a", "name": "Greenwich Village", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "History", "content": "Greenwich Village, often simply called 'the Village', has been a cultural and creative hub since the early 20th century. It was a focal point for the American bohemian culture, the Beatnik movement, and later the counterculture of the 1960s.", "tips": "Take a literary walking tour to discover the homes and haunts of writers like Henry James, Edith Wharton, and E.E. Cummings who lived in the neighborhood." },
                                { "title": "Washington Square Park", "content": "The heart of Greenwich Village is Washington Square Park, recognizable by its iconic arch. The park serves as a gathering place for street performers, chess players, and students from nearby NYU.", "tips": "Visit on Sunday afternoons when local musicians often gather for impromptu performances. The northwest corner has tables for chess games - players welcome challenges from visitors." },
                                { "title": "Arts & Entertainment", "content": "The Village is home to many small theaters, jazz clubs, and comedy venues. The historic Stonewall Inn, site of the 1969 riots that sparked the modern LGBTQ+ rights movement, is located here.", "tips": "Check out the Village Vanguard or Blue Note for world-class jazz. For comedy, the Comedy Cellar often features surprise appearances by famous comedians not on the lineup." }
                            ]
                        },
                        {
                            "id": "3b", "name": "Williamsburg", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "Overview", "content": "Williamsburg is a vibrant neighborhood in Brooklyn known for its hipster culture, thriving arts scene, and waterfront views of Manhattan. Once an industrial area, it's now one of NYC's most dynamic neighborhoods.", "tips": "Visit on weekends when the markets are open and the streets are most lively." },
                                { "title": "Food & Drink", "content": "The area is a food lover's paradise with artisanal restaurants, breweries, food markets like Smorgasburg (seasonal), and specialty coffee shops throughout the neighborhood.", "tips": "Don't miss Smorgasburg at Marsha P. Johnson State Park on Saturdays (April-October) for amazing food vendors." },
                                { "title": "Shopping & Culture", "content": "Bedford Avenue is lined with independent boutiques, vintage shops, and record stores. The neighborhood is also home to music venues like Brooklyn Bowl and the Brooklyn Brewery for tours and tastings.", "tips": "Artists & Fleas indoor market operates year-round and showcases local designers and artisans." }
                            ]
                        },
                        {
                            "id": "3c", "name": "Harlem", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "Cultural Heritage", "content": "Harlem stands as a cornerstone of African American culture, famous for the Harlem Renaissance of the 1920s and 30s that produced influential artists, writers, and musicians. This cultural explosion helped shape American arts and continues to influence the neighborhood's identity today.", "tips": "The Studio Museum Harlem showcases work by artists of African descent. Check their website before visiting, as they often host community days with free admission and special programming." },
                                { "title": "Music & Religion", "content": "The Apollo Theater remains an iconic landmark where countless musical legends launched their careers. Gospel music thrives in Harlem's historic churches, while jazz clubs continue the neighborhood's musical legacy in intimate venues throughout the area.", "tips": "For an authentic gospel experience, attend a Sunday service at Abyssinian Baptist Church, but arrive early as it's popular with visitors. Reserve seats for Amateur Night at the Apollo well in advance to witness this legendary tradition." },
                                { "title": "Food & Community", "content": "Harlem's culinary scene celebrates soul food traditions alongside West African, Caribbean, and modern interpretations of classic dishes. The neighborhood continues to evolve while maintaining strong community ties and cultural pride.", "tips": "Visit Sylvia's Restaurant, the 'Queen of Soul Food,' for traditional favorites, but don't miss newer establishments like Red Rooster by Marcus Samuelsson. Malcolm Shabazz Harlem Market offers authentic African crafts and textiles." }
                            ]
                        },
                        {
                            "id": "3d", "name": "DUMBO", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "Transformation", "content": "DUMBO (Down Under the Manhattan Bridge Overpass) has transformed from an industrial waterfront district into one of Brooklyn's most desirable neighborhoods. Former warehouses and factories now house luxury apartments, tech startups, art galleries, and boutiques.", "tips": "The area between the Brooklyn and Manhattan Bridges is compact and easily explored in a few hours. Weekdays are significantly less crowded than weekends, offering a more relaxed experience." },
                                { "title": "Views & Parks", "content": "The neighborhood offers spectacular views of the Manhattan skyline, especially from Brooklyn Bridge Park and the iconic intersection of Washington and Water Streets, where the Manhattan Bridge frames the Empire State Building. Jane's Carousel, a restored 1922 merry-go-round, sits in a glass pavilion on the waterfront.", "tips": "For the famous Washington Street photo spot, arrive early morning (before 8am) to avoid crowds. Pebble Beach within Brooklyn Bridge Park offers the best sunset views of the Manhattan skyline and Brooklyn Bridge." },
                                { "title": "Arts & Dining", "content": "DUMBO hosts numerous galleries, design studios, and the St. Ann's Warehouse performing arts center. The food scene ranges from upscale restaurants to Time Out Market, a curated food hall featuring some of New York's most celebrated chefs and restaurants.", "tips": "Visit on the first Thursday evening of the month when galleries stay open late for the DUMBO Art Walk. For a local favorite, grab pizza at Juliana's (founded by the original owner of famous Grimaldi's) and eat it in Brooklyn Bridge Park." }
                            ]
                        },
                        {
                            "id": "3e", "name": "Lower East Side", "sectionProperties": ["title", "content", "tips"],
                            "sections": [
                                { "title": "Immigrant Heritage", "content": "The Lower East Side stands as a testament to New York's immigrant history, particularly Jewish, Italian, and Chinese communities that settled here in the late 19th and early 20th centuries. Tenement buildings that once housed newly arrived immigrants now contribute to the neighborhood's distinctive architectural character.", "tips": "The Tenement Museum offers immersive guided tours of preserved immigrant apartments, each telling the story of a different family. Book tours in advance as they frequently sell out, especially during peak tourist season." },
                                { "title": "Evolution & Nightlife", "content": "While honoring its historic roots, the Lower East Side has evolved into a hub for nightlife, independent music venues, and avant-garde galleries. The contrast between old-world establishments and cutting-edge businesses creates the neighborhood's unique energy.", "tips": "For live music, check the schedules at Mercury Lounge, Rockwood Music Hall, and Bowery Ballroom. Many bars don't get busy until after 10pm, with peak hours between midnight and 2am on weekends." },
                                { "title": "Food & Shopping", "content": "The culinary landscape reflects both the area's immigrant heritage and contemporary innovation. Historic establishments like Katz's Delicatessen and Russ & Daughters operate alongside trendy restaurants and cocktail bars. Independent boutiques and vintage shops line the streets of the once-dominant garment district.", "tips": "Visit Essex Market, recently relocated to a modern facility, for a diverse food hall experience with vendors representing multiple cultures. For the full Katz's Deli experience, be prepared for the ordering system: take a ticket when entering, order directly from the cutters, and don't lose your ticket!" }
                            ]
                        }
                    ]
                }
            };

            // --- DOM Elements ---
            // Get references to the HTML elements that the script will interact with.
            const level1Dropdown = document.getElementById('level1-dropdown');
            const level2Dropdown = document.getElementById('level2-dropdown');
            const contentArea = document.getElementById('content-area');
            const initialMessageElement = document.getElementById('initial-message'); 
            const mainTitleElement = document.getElementById('main-title'); // Reference to the H1 main title

            // --- UI Configuration from Data ---
            // Set the document title and dropdown labels based on the currentExplorerData.
            document.title = currentExplorerData.appTitle; 
            document.querySelector('label[for="level1-dropdown"]').textContent = `${currentExplorerData.level1Label}:`;
            document.querySelector('label[for="level2-dropdown"]').textContent = `${currentExplorerData.level2Label}:`;

            // --- Initialize Application ---
            // This function sets up the initial state of the application.
            // It checks if the necessary data (level1Items and level2Items) is present.
            // If data is missing, it displays an error message.
            // Otherwise, it populates the first dropdown and sets an initial message.
            function initializeApp() {
                if (!currentExplorerData.level1Items || !currentExplorerData.level1Items.items) {
                    console.error("Level 1 data is missing or malformed.");
                    contentArea.innerHTML = `<p class="text-red-600 font-semibold p-4 bg-red-100 rounded-md">Error: Level 1 data not found.</p>`;
                    return;
                }
                if (!currentExplorerData.level2Items || !currentExplorerData.level2Items.items) {
                    console.error("Level 2 data is missing or malformed.");
                    contentArea.innerHTML = `<p class="text-red-600 font-semibold p-4 bg-red-100 rounded-md">Error: Level 2 data not found.</p>`;
                    return;
                }
                populateLevel1Dropdown();
                updateInitialMessage(`Please select a ${currentExplorerData.level1Label.toLowerCase()} to continue.`);
            }

            // --- Populate Dropdowns ---
            // Populates the first dropdown (e.g., City) with items from currentExplorerData.level1Items.
            function populateLevel1Dropdown() {
                currentExplorerData.level1Items.items.forEach(item => {
                    const option = document.createElement('option');
                    option.value = item.id;
                    option.textContent = item.name;
                    option.className = "text-slate-700"; // Style for dropdown options
                    level1Dropdown.appendChild(option);
                });
            }

            // Populates the second dropdown (e.g., Neighborhood) based on the selection in the first dropdown.
            // It filters currentExplorerData.level2Items based on the selectedLevel1ItemId.
            // If no items are found for the selection, it updates the initial message.
            function populateLevel2Dropdown(selectedLevel1ItemId) {
                level2Dropdown.innerHTML = `<option value="" class="text-slate-500">-- Select ${currentExplorerData.level2Label} --</option>`; // Reset and add default option
                level2Dropdown.disabled = true; // Disable until populated
                clearContentArea(); 
                updateInitialMessage(`Please select a ${currentExplorerData.level2Label.toLowerCase()} to view details.`);

                if (!selectedLevel1ItemId) return; // Exit if no level 1 item is selected

                // Filter level 2 items: assumes level 2 item IDs start with the level 1 item ID (e.g., "1a" for level 1 ID "1")
                const filteredItems = currentExplorerData.level2Items.items.filter(item => item.id.startsWith(selectedLevel1ItemId));

                if (filteredItems.length > 0) {
                    filteredItems.forEach(item => {
                        const option = document.createElement('option');
                        option.value = item.id;
                        option.textContent = item.name;
                        option.className = "text-slate-700"; // Style for dropdown options
                        level2Dropdown.appendChild(option);
                    });
                    level2Dropdown.disabled = false; // Enable the dropdown
                } else {
                    updateInitialMessage(`No ${currentExplorerData.level2Label.toLowerCase()}s found for the selected ${currentExplorerData.level1Label.toLowerCase()}.`);
                }
            }
            
            // Clears the content area and ensures the initial message placeholder is ready.
            function clearContentArea() {
                contentArea.innerHTML = ''; // Clear previous content
                if (initialMessageElement) { 
                    // Ensure initialMessageElement is re-added to contentArea if it's not already there
                    // or if contentArea was completely cleared.
                    if (!contentArea.contains(initialMessageElement)) {
                        contentArea.appendChild(initialMessageElement);
                    }
                    initialMessageElement.style.display = 'block'; // Make it visible by default when content is cleared
                }
            }

            // --- Display Content ---
            // Displays the details of the selected level 2 item (e.g., Neighborhood).
            // It finds the item in currentExplorerData.level2Items and dynamically creates HTML elements to show its sections.
            function displayItemDetails(selectedLevel2ItemId) {
                clearContentArea(); 
                if (!selectedLevel2ItemId) {
                    updateInitialMessage(`Please select a ${currentExplorerData.level2Label.toLowerCase()} to view details.`);
                    return;
                }

                const itemDetails = currentExplorerData.level2Items.items.find(item => item.id === selectedLevel2ItemId);

                if (itemDetails) {
                    if(initialMessageElement) initialMessageElement.style.display = 'none'; // Hide initial message

                    // Create and append the main name header for the selected neighborhood
                    const nameHeader = document.createElement('h2');
                    nameHeader.textContent = itemDetails.name;
                    nameHeader.className = "text-2xl font-semibold text-slate-700 mb-4 pb-2"; // Tailwind classes + custom style from <head>
                    contentArea.appendChild(nameHeader);

                    // Iterate through each section (e.g., History, Attractions) of the selected item
                    itemDetails.sections.forEach(section => {
                        const sectionDiv = document.createElement('div');
                        sectionDiv.className = 'section p-4 rounded-lg shadow mb-4'; // Tailwind classes + custom style from <head>

                        // Check if sectionProperties is defined and is an array
                        if (itemDetails.sectionProperties && Array.isArray(itemDetails.sectionProperties)) {
                            // Iterate through the defined sectionProperties to maintain order and structure
                            itemDetails.sectionProperties.forEach((propName, index) => {
                                // Check if the property exists in the current section, is not null, and is not an empty string
                                if (section[propName] !== undefined && section[propName] !== null && String(section[propName]).trim() !== '') {
                                    let element;
                                    if (index === 0) { // Assume the first property in sectionProperties is the title
                                        element = document.createElement('h3');
                                        element.className = "text-xl font-semibold mb-2"; // Tailwind classes + custom style from <head>
                                    } else {
                                        element = document.createElement('p');
                                        element.className = "text-slate-600 mb-2 leading-relaxed"; // Tailwind classes
                                        // Special styling for 'tips' paragraphs
                                        if (propName === 'tips') {
                                            element.classList.add('italic', 'text-sm', 'text-blue-600', 'border-l-2', 'border-blue-500', 'pl-3', 'py-1', 'bg-blue-50', 'rounded-r-md');
                                        }
                                    }
                                    element.textContent = section[propName]; 
                                    sectionDiv.appendChild(element);
                                }
                            });
                        }
                        // Only append the sectionDiv if it actually contains child elements (i.e., content was added)
                        if (sectionDiv.hasChildNodes()) {
                            contentArea.appendChild(sectionDiv);
                        }
                    });
                } else {
                     updateInitialMessage(`Details not found for the selected ${currentExplorerData.level2Label.toLowerCase()}.`);
                }
            }
            
            // Updates or creates the initial/placeholder message in the content area.
            function updateInitialMessage(message) {
                if (initialMessageElement) {
                    initialMessageElement.textContent = message;
                    initialMessageElement.style.display = 'block'; // Ensure it's visible
                     // Ensure it's a child of contentArea if not already
                    if (!contentArea.contains(initialMessageElement)) {
                        // If contentArea was cleared in a way that removed initialMessageElement, re-add it.
                        contentArea.insertBefore(initialMessageElement, contentArea.firstChild);
                    }
                } else { 
                    // Fallback if initialMessageElement was somehow removed or not found
                    const p = document.createElement('p');
                    p.id = "initial-message"; 
                    p.className = "text-slate-600 italic text-center py-8";
                    p.textContent = message;
                    // Clear content area before adding new message if initial element is gone
                    while (contentArea.firstChild) {
                        contentArea.removeChild(contentArea.firstChild);
                    }
                    contentArea.appendChild(p);
                }
            }

            // --- Event Listeners ---
            // Add event listener to the first dropdown. When its value changes,
            // populate the second dropdown accordingly.
            level1Dropdown.addEventListener('change', (e) => {
                const selectedLevel1ItemId = e.target.value;
                populateLevel2Dropdown(selectedLevel1ItemId); 
            });

            // Add event listener to the second dropdown. When its value changes,
            // display the details for the selected item.
            level2Dropdown.addEventListener('change', (e) => {
                const selectedLevel2ItemId = e.target.value;
                displayItemDetails(selectedLevel2ItemId);
            });

            // --- Start the app ---
            // Call initializeApp to set everything up when the DOM is ready.
            initializeApp();
        });
    </script>
</body>
</html>
