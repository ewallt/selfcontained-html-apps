<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trivia Game - 1970s Edition (40 Qs)</title>

    <script>
        // Trivia Data for the 1970s (40 Questions total)
        // Delimiters: | for next question, / for question-answers, , for answers. # marks correct answer.
        const rawTriviaStringData =
            "What popular music genre characterized by syncopated rhythms and often featuring orchestral arrangements rose to prominence in the mid-1970s?/Punk Rock,Disco#,New Wave,Funk|Which U.S. President resigned from office in 1974 following the Watergate scandal?/Gerald Ford,Jimmy Carter,Richard Nixon#,Lyndon B. Johnson|The first 'Star Wars' movie was released in what year?/1975,1976,1977#,1978|What was the name of the first Apple computer released in 1976?/Apple Lisa,Macintosh,Apple II#,Apple I|The OPEC oil embargo which caused a global energy crisis began in what year?/1971,1972,1973#,1974|What iconic arcade game featuring a yellow puck-shaped character eating dots was first released in Japan in 1980 but became a global phenomenon shortly after based on 70s development?/Space Invaders,Donkey Kong,Pac-Man#,Galaxian|Which country won the FIFA World Cup in 1974 hosted in West Germany?/Netherlands,Brazil,West Germany#,Argentina|The Vietnam War officially ended for the United States with the fall of Saigon in what year?/1973,1974,1975#,1976|What popular fashion trend involved wide-legged trousers for both men and women?/Platform shoes,Leisure suits,Bell-bottoms#,Hot pants|Who became the Prime Minister of the United Kingdom in 1979 the first woman to hold the office?/Indira Gandhi,Golda Meir,Margaret Thatcher#,Angela Merkel" +
            "|What was the name of the first space station launched by the United States in 1973?/Mir,Skylab#,Salyut 1,International Space Station|Which rock band released the influential album 'The Dark Side of the Moon' in 1973?/Led Zeppelin,Queen,Pink Floyd#,The Rolling Stones|The Clean Air Act was significantly amended and strengthened in the U.S. in what year?/1970#,1972,1975,1977|What popular handheld electronic game simulating various sports was introduced by Mattel in the late 1970s?/Simon,Merlin,Mattel Auto Race,Mattel Football#|Which movie featuring a giant shark terrorizing a beach community was a blockbuster hit in 1975?/The Exorcist,Close Encounters of the Third Kind,Jaws#,Alien|The Camp David Accords a peace treaty between Israel and Egypt were signed in what year?/1977,1978#,1979,1980|What was the name of the first test-tube baby Louise Brown born in England in 1978?/Olivia Smith,Emma Jones,Louise Brown#,Jessica Williams|Which TV series featuring a group of high school friends in the 1950s premiered in 1974 and became a major hit?/M*A*S*H,All in the Family,Happy Days#,The Brady Bunch|The Three Mile Island nuclear accident occurred in which U.S. state in 1979?/California,New York,Pennsylvania#,Ohio|What popular toy consisted of small posable action figures often with military themes first introduced in the 60s but hugely popular in the 70s?/Transformers,G.I. Joe#,Star Wars figures,Micronauts" +
            "|Which Stephen King novel about a girl with telekinetic powers was published in 1974 and later adapted into a famous film?/The Shining,Carrie#,Salem's Lot,It|What was the name of the NASA space probes launched in 1977 to study the outer planets?/Pioneer 10 & 11,Mariner 10,Voyager 1 & 2#,Viking 1 & 2|The musical 'Grease' was released as a hit film starring John Travolta and Olivia Newton-John in what year?/1977,1978#,1979,1980|What popular hairstyle for men featured long hair often feathered or layered and a mustache?/Mullet,Afro,Shag#,Bowl cut|The video game 'Space Invaders' was first released in arcades in what year?/1977,1978#,1979,1980|Which organization carried out the Munich massacre at the 1972 Summer Olympics?/Red Army Faction,PLO (Black September)#,IRA,ETA|What environmental disaster involved the massive oil spill from the supertanker Amoco Cadiz off the coast of Brittany France in 1978?/Exxon Valdez,Torrey Canyon,Amoco Cadiz#,Deepwater Horizon|The movie 'Saturday Night Fever' which popularized disco culture was released in what year?/1976,1977#,1978,1979|What was the name of the revolutionary home video game console released by Atari in 1977?/ColecoVision,Intellivision,Atari 2600 (VCS)#,Magnavox OdysseyÂ²|The World Trade Center towers in New York City were completed and opened in what year?/1971,1972,1973#,1975" +
            "|Which country experienced a revolution in 1979 leading to the establishment of an Islamic Republic?/Iraq,Afghanistan,Iran#,Syria|What popular children's animated shorts series 'Schoolhouse Rock!' teaching subjects like grammar and math first aired in the 1970s?/Sesame Street,The Electric Company,Schoolhouse Rock!#,Mister Rogers' Neighborhood|The Concorde supersonic transport (SST) made its first commercial passenger flights in what year?/1973,1975,1976#,1977|What was the name of the U.S. bicentennial celebration year?/1975,1976#,1977,1978|Which film won the Academy Award for Best Picture for 1972 at the 45th Academy Awards?/The French Connection,A Clockwork Orange,The Godfather#,Cabaret|The Sony Walkman a portable cassette player was first introduced in what year?/1978,1979#,1980,1981|What major international conflict took place in October 1973 between Israel and a coalition of Arab states?/Six-Day War,Suez Crisis,Yom Kippur War#,Lebanese Civil War|Which iconic comedy show premiered on NBC in 1975 featuring a cast of young comedians and a different weekly host?/The Carol Burnett Show,Rowan & Martin's Laugh-In,Saturday Night Live#,Fridays|The Rubik's Cube was invented in 1974 by a professor from which country?/Germany,United States,Hungary#,Japan|What popular dance involved pointing one finger up and one down in opposite directions often performed to disco music?/The Hustle,The Bump,The YMCA dance,The Point (Travolta move)#";
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles (unchanged from previous version) */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Ensure body takes full viewport height */
            padding: 16px; /* Padding around the container */
        }
        .trivia-container {
            background-color: #ffffff; /* White background for the game box */
            padding: 24px; /* Padding inside the game box */
            border-radius: 12px; /* Rounded corners for the game box */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* Soft shadow for depth */
            width: 100%; /* Full width on small screens */
            max-width: 600px; /* Max width for larger screens */
        }
        @media (min-width: 640px) { /* sm breakpoint in Tailwind */
            .trivia-container {
                padding: 32px; /* Larger padding on larger screens */
            }
        }
        .answer-btn {
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out; /* Smooth transitions */
            border: 1px solid #e2e8f0; /* Light gray border for buttons */
            min-height: 60px;
            display: flex; /* Added for centering text */
            justify-content: center; /* Added for centering text */
            align-items: center; /* Added for centering text */
            text-align: center; /* Ensure text is centered */
        }
        .answer-btn:hover:not(:disabled) {
            background-color: #f8fafc; /* Lighter background on hover */
            transform: translateY(-2px); /* Slight lift effect on hover */
        }
        .answer-btn.correct {
            background-color: #10B981 !important; /* Green for correct answers */
            color: white !important;
            border-color: #059669 !important; /* Darker green border */
        }
        .answer-btn.incorrect {
            background-color: #EF4444 !important; /* Red for incorrect answers */
            color: white !important;
            border-color: #DC2626 !important; /* Darker red border */
        }
        .answer-btn:disabled {
            opacity: 0.7; /* Slightly faded when disabled */
            cursor: not-allowed; /* Indicate non-interactive state */
        }
        #feedback {
            min-height: 24px; /* Reserve space for feedback text */
            font-weight: 500; /* Medium font weight for feedback */
            margin-bottom: 1rem; /* Space below feedback */
        }
        /* Ensure consistent text color for main elements */
        h1, h2, p, button, span {
            color: #1a202c; /* Dark gray text for readability */
        }
        /* Override text color for correct/incorrect buttons */
        .answer-btn.correct span, .answer-btn.incorrect span {
            color: white;
        }
         .answer-btn span {
            color: #1a202c; /* Default text color for answer button spans */
        }
        #score, #question-counter {
            color: #4a5568; /* Slightly lighter gray for score and counter */
        }
        #next-btn {
            transition: background-color 0.2s ease-in-out, opacity 0.2s ease-in-out;
        }
        #next-btn:disabled {
            background-color: #9ca3af; /* Gray when disabled */
            opacity: 0.6;
            cursor: not-allowed;
        }
         #next-btn:disabled:hover {
            background-color: #9ca3af; /* Keep gray on hover when disabled */
        }
    </style>
</head>
<body>
    <div class="trivia-container text-center">
        <h1 class="text-3xl font-bold mb-6 text-indigo-600">1970s Trivia Challenge!</h1>

        <div id="score-area" class="mb-4 text-lg">
            <span id="score" class="font-semibold">Score: 0</span>
             <span class="mx-2">|</span>
            <span id="question-counter" class="font-semibold">Question: 1 / 10</span>
        </div>

        <div id="question-area" class="mb-6">
            <h2 id="question-text" class="text-xl font-semibold mb-4 min-h-[60px] flex items-center justify-center">
                Loading question...
            </h2>
            <div id="answer-buttons" class="grid grid-cols-2 gap-4">
                </div>
        </div>

        <div id="feedback" class="mt-4 text-lg font-medium">
            &nbsp; </div>

        <button id="next-btn" class="mt-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md w-full sm:w-auto">
            Next Question
        </button>

        <div id="game-over-message" class="hidden mt-6 text-2xl font-bold">
            <p id="final-score"></p>
            <button id="restart-btn" class="mt-4 bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition duration-150 ease-in-out">
                </button>
        </div>
    </div>

    <script>
        // --- Data Parsing Function ---
        // Parses the rawTriviaStringData (defined in the head) into the structured format the game expects.
        function parseTriviaData() {
            const parsedQuestions = [];
            // rawTriviaStringData is defined above in the head
            const questionBlocks = rawTriviaStringData.split('|');

            questionBlocks.forEach(block => {
                if (block.trim() === "") return; // Skip empty blocks if any

                const parts = block.split('/');
                if (parts.length !== 2) {
                    console.error("Invalid data block format:", block);
                    return; // Skip malformed blocks
                }

                const questionText = parts[0].trim();
                const answerStrings = parts[1].split(',').map(s => s.trim());

                parsedQuestions.push({
                    question: questionText,
                    answers: answerStrings
                });
            });
            return parsedQuestions;
        }

        // --- DOM Elements ---
        const questionTextElement = document.getElementById('question-text');
        const answerButtonsElement = document.getElementById('answer-buttons');
        const feedbackElement = document.getElementById('feedback');
        const nextButton = document.getElementById('next-btn');
        const scoreElement = document.getElementById('score');
        const questionCounterElement = document.getElementById('question-counter');
        const gameOverMessageElement = document.getElementById('game-over-message');
        const finalScoreElement = document.getElementById('final-score');
        const restartButton = document.getElementById('restart-btn');
        const questionAreaElement = document.getElementById('question-area');
        const scoreAreaElement = document.getElementById('score-area');

        // --- Game State ---
        let allQuestions = [];
        let questionsForCurrentSession = [];
        let currentQuestionInSessionIndex = 0;
        let overallPlayedQuestionsCount = 0;
        let score = 0;
        const QUESTIONS_PER_SESSION = 10; // Number of questions per game session

        // --- Functions ---
        // Function to shuffle an array (Fisher-Yates shuffle)
        function shuffleArray(array) {
            const newArray = [...array]; // Create a copy to avoid modifying the original
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]]; // Swap elements
            }
            return newArray;
        }

        // Called at the very beginning or when "Play Full Game Again?" is clicked
        function startGame() {
            allQuestions = shuffleArray(parseTriviaData()); // Parse and shuffle all available questions
            overallPlayedQuestionsCount = 0; // Reset count of questions played across all sessions
            score = 0; // Reset score for a completely new game
            scoreElement.textContent = `Score: ${score}`;

            // Hide game over message if it was visible
            gameOverMessageElement.classList.add('hidden');
            // Ensure main game elements are visible
            questionAreaElement.classList.remove('hidden');
            scoreAreaElement.classList.remove('hidden');
            answerButtonsElement.classList.remove('hidden');
            nextButton.style.display = 'block'; // Or 'inline-block' or 'flex' depending on desired layout

            prepareNewSession(); // Start the first session
        }

        // Prepares a new 10-question session
        function prepareNewSession() {
            // Determine the slice of questions for the current session from the master shuffled list
            const start = overallPlayedQuestionsCount;
            const end = Math.min(start + QUESTIONS_PER_SESSION, allQuestions.length);

            questionsForCurrentSession = allQuestions.slice(start, end);

            if (questionsForCurrentSession.length === 0) {
                // This case should ideally be caught by endSession before calling prepareNewSession,
                // but as a fallback if all questions are exhausted.
                showFinalThankYouMessage();
                return;
            }

            currentQuestionInSessionIndex = 0; // Reset index for the new session

            // Update UI for the new session
            feedbackElement.innerHTML = '&nbsp;'; // Clear previous feedback
            gameOverMessageElement.classList.add('hidden'); // Hide previous session's game over message
            questionAreaElement.classList.remove('hidden');
            answerButtonsElement.classList.remove('hidden');
            nextButton.style.display = 'block'; // Ensure next button is visible
            nextButton.disabled = true; // Disable next button until an answer is selected
            nextButton.textContent = "Next Question"; // Default text for next button

            loadQuestion(); // Load the first question of the new session
        }

        // Function to load the current question and its answers
        function loadQuestion() {
            resetStateForNewQuestion(); // Clear buttons and feedback from previous question
            if (currentQuestionInSessionIndex < questionsForCurrentSession.length) {
                const currentQuestion = questionsForCurrentSession[currentQuestionInSessionIndex];
                questionTextElement.textContent = currentQuestion.question;
                // Display session progress (e.g., Question 1/10)
                questionCounterElement.textContent = `Question: ${currentQuestionInSessionIndex + 1} / ${questionsForCurrentSession.length}`;

                // The 'answers' property is already an array of strings from parseTriviaData()
                const shuffledAnswerStrings = shuffleArray([...currentQuestion.answers]); // Shuffle answers for this question

                shuffledAnswerStrings.forEach(answerString => {
                    const button = document.createElement('button');
                    let displayText = answerString;
                    let isThisAnswerCorrect = false;

                    // Check for the '#' marker to determine correctness and clean the display text.
                    if (answerString.endsWith('#')) {
                        displayText = answerString.slice(0, -1); // Remove the '#'
                        isThisAnswerCorrect = true;
                    }

                    button.innerHTML = `<span class="truncate">${displayText}</span>`; // Use span for better text control if needed
                    // Store the clean display text on the button for later comparison if needed.
                    button.dataset.answerText = displayText;

                    button.classList.add('answer-btn', 'w-full', 'p-3', 'sm:p-4', 'rounded-lg', 'bg-white', 'hover:bg-gray-100', 'focus:outline-none', 'focus:ring-2', 'focus:ring-indigo-500', 'font-medium');
                    // Pass the determined correctness to the selectAnswer function.
                    button.addEventListener('click', () => selectAnswer(button, isThisAnswerCorrect));
                    answerButtonsElement.appendChild(button);
                });

                nextButton.disabled = true; // Ensure next button is disabled initially
                 if (currentQuestionInSessionIndex >= questionsForCurrentSession.length - 1) {
                    nextButton.textContent = "Finish Session"; // Last question of the session
                } else {
                    nextButton.textContent = "Next Question";
                }
            } else {
                // This should not happen if logic is correct, endSession handles session completion
                endSession();
            }
        }

        // Resets elements for a new question within the current session
        function resetStateForNewQuestion() {
            feedbackElement.innerHTML = '&nbsp;'; // Clear feedback
            // nextButton.disabled = true; // This is handled in loadQuestion and prepareNewSession
            while (answerButtonsElement.firstChild) { // Clear old answer buttons
                answerButtonsElement.removeChild(answerButtonsElement.firstChild);
            }
        }

        // Handles answer selection
        function selectAnswer(selectedButton, isClickedAnswerCorrect) {
            // Disable all answer buttons first to prevent multiple clicks
            Array.from(answerButtonsElement.children).forEach(button => {
                button.disabled = true;
            });

            // Determine the actual correct answer text for the current question
            const currentQuestionData = questionsForCurrentSession[currentQuestionInSessionIndex];
            let actualCorrectText = "";
            // The 'answers' are already in the format ["Answer1", "Answer2#", ...]
            currentQuestionData.answers.forEach(ansStr => {
                if (ansStr.endsWith('#')) {
                    actualCorrectText = ansStr.slice(0, -1); // Get text without '#'
                }
            });

            // Style all buttons: green for correct, red for the one clicked if incorrect.
            Array.from(answerButtonsElement.children).forEach(button => {
                const buttonText = button.dataset.answerText; // Get the clean text stored earlier
                if (buttonText === actualCorrectText) {
                    button.classList.add('correct'); // Mark the correct answer button
                }
            });

            // Handle scoring and feedback based on the clicked answer
            if (isClickedAnswerCorrect) {
                score++; // Score is cumulative across sessions until a full game restart
                scoreElement.textContent = `Score: ${score}`;
                feedbackElement.textContent = "Correct!";
                feedbackElement.classList.remove('text-red-500');
                feedbackElement.classList.add('text-green-500');
            } else {
                // If the clicked answer was wrong, specifically mark it red.
                selectedButton.classList.add('incorrect');
                feedbackElement.textContent = "Wrong!";
                feedbackElement.classList.remove('text-green-500');
                feedbackElement.classList.add('text-red-500');
            }

            nextButton.disabled = false; // Enable the Next/Finish button
        }

        // Handles click on "Next Question" or "Finish Session" button
        function handleNextButton() {
            currentQuestionInSessionIndex++;
            if (currentQuestionInSessionIndex < questionsForCurrentSession.length) {
                loadQuestion(); // Load next question in the current session
            } else {
                endSession(); // Current 10-question session is over
            }
        }

        // Called when a 10-question session ends
        function endSession() {
            overallPlayedQuestionsCount += questionsForCurrentSession.length; // Add played questions to overall count

            // Hide active game elements
            questionAreaElement.classList.add('hidden');
            answerButtonsElement.classList.add('hidden');
            nextButton.style.display = 'none';
            feedbackElement.innerHTML = '&nbsp;'; // Clear feedback

            // Show game over/session complete message area
            gameOverMessageElement.classList.remove('hidden');

            if (overallPlayedQuestionsCount < allQuestions.length) {
                // More questions available for another session
                finalScoreElement.textContent = `Session Complete! Current Score: ${score}`;
                restartButton.textContent = "Do another?"; // Prompt to start next session
                // The existing event listener on restartButton will call handleRestartOrContinue
            } else {
                // All questions from allQuestions have been played
                showFinalThankYouMessage();
            }
        }

        // Called when all questions in all sessions have been played
        function showFinalThankYouMessage() {
            finalScoreElement.textContent = `Thank you for playing! Final Score: ${score}`;
            restartButton.textContent = "Play Full Game Again?"; // Prompt to restart the entire game
            // Ensure game over message is visible if not already
            gameOverMessageElement.classList.remove('hidden');
            // Hide active game elements that might still be visible if called directly
            questionAreaElement.classList.add('hidden');
            answerButtonsElement.classList.add('hidden');
            nextButton.style.display = 'none';
        }

        // Handles clicks on "Do another?" or "Play Full Game Again?"
        function handleRestartOrContinue() {
            if (overallPlayedQuestionsCount < allQuestions.length) {
                prepareNewSession(); // Start next session with remaining questions
            } else {
                startGame(); // Restart the entire game from scratch (reshuffle all questions)
            }
        }

        // --- Event Listeners ---
        nextButton.addEventListener('click', handleNextButton);
        restartButton.addEventListener('click', handleRestartOrContinue); // Unified handler for restart/continue

        // --- Initialize Game ---
        document.addEventListener('DOMContentLoaded', () => {
            // Initial text for restartButton will be set by endSession or showFinalThankYouMessage dynamically
            startGame(); // Start the game when the DOM is fully loaded
        });
    </script>
</body>
</html>
