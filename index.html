<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adaptive Reader – Waggoner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-main: #f8fafc; /* slate-50 */
            --text-main: #1e293b; /* slate-800 */
            --text-muted: #475569; /* slate-600 */
            --text-heading: #0f172a; /* slate-900 */
            --bg-card: #ffffff; /* white */
            --bg-control: #e2e8f0; /* slate-200 */
            --border-muted: #e2e8f0; /* slate-200 */
            --border-quote: #94a3b8; /* slate-400 */
            --bg-scripture: #f1f5f9; /* slate-100 */

            /* Accent colors will be set by JS */
            --accent-color: #2563eb; /* blue-600 */
            --accent-color-text: #1e3a8a; /* blue-800 */
            --accent-color-light-bg: #eff6ff; /* blue-50 */
        }

        html.dark {
            --bg-main: #0f172a; /* slate-900 */
            --text-main: #cbd5e1; /* slate-300 */
            --text-muted: #94a3b8; /* slate-400 */
            --text-heading: #f1f5f9; /* slate-100 */
            --bg-card: #1e293b; /* slate-800 */
            --bg-control: #334155; /* slate-700 */
            --border-muted: #334155; /* slate-700 */
            --border-quote: #64748b; /* slate-500 */
            --bg-scripture: #334155; /* slate-700 */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-main);
            transition: background-color 0.3s, color 0.3s;
        }

        /* --- View Switching Logic --- */
        #app-container.view-page { display: flex; flex-direction: column; min-height: calc(100vh - 4rem); }
        #page-viewport { width: 100%; }
        #kb-container { transition: transform 0.4s ease-in-out; }
        .view-page #page-viewport { overflow: hidden; }
        .view-page #kb-container { display: flex; }
        .view-page .kb-card { width: 100%; flex-shrink: 0; display: flex; flex-direction: column; }
        .view-page .card-content-wrapper { flex-grow: 1; overflow-y: auto; }
        .view-page #navigation-controls { display: flex; }
        .view-scroll #page-viewport { overflow: visible; }
        .view-scroll #kb-container { display: block; }
        .view-scroll .kb-card { margin-bottom: 2rem; }
        .view-scroll #navigation-controls { display: none; }

        /* --- Themed Component Styles --- */
        .step-circle, .nav-button:not(:disabled), .theme-button.active { background-color: var(--accent-color); }
        .core-principle { background-color: var(--accent-color-light-bg); color: var(--accent-color-text); }
        .key-term { color: var(--accent-color-text); }
        .quote-block { border-color: var(--accent-color); }
        .bullet-list li::before { color: var(--accent-color); content: '•'; position: absolute; left: 0; font-weight: 700; }

        /* --- General Component Styles --- */
        .control-button { padding: 0.5rem 1.25rem; border-radius: 9999px; font-weight: 600; transition: all 0.2s ease-in-out; }
        .control-button.active { box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); color: white; }
        .control-button.inactive { background-color: var(--bg-card); color: var(--text-main); }
        .control-button.inactive:hover { opacity: 0.8; }
        .nav-button { padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 600; display: inline-flex; align-items: center; gap: 0.5rem; transition: all 0.2s; color: white; }
        .nav-button:disabled { background-color: var(--bg-control); color: var(--text-muted); cursor: not-allowed; }
        .control-group { background-color: var(--bg-control); }
    </style>
</head>
<body class="antialiased">

    <div id="app-container" class="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 w-full">
        <header class="text-center mb-4">
            <h1 id="main-title" class="text-3xl font-bold tracking-tight sm:text-4xl" style="color: var(--text-heading);"></h1>
            <p id="main-summary" class="mt-2 text-base max-w-3xl mx-auto" style="color: var(--text-muted);"></p>
        </header>

        <div class="flex flex-col sm:flex-row justify-center items-center gap-4 my-8">
            <div class="control-group flex items-center gap-1 p-1 rounded-full">
                <button id="dark-mode-toggle" class="control-button inactive h-9 w-9 p-0 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" /></svg>
                </button>
            </div>
            <div id="ui-switcher" class="control-group flex items-center gap-1 p-1 rounded-full">
                <button data-view="page" class="ui-button control-button">Page</button>
                <button data-view="scroll" class="ui-button control-button">Scroll</button>
            </div>
            <div id="theme-switcher" class="control-group flex items-center gap-1 p-1 rounded-full">
                <button data-theme="blue" class="theme-button control-button">Blue</button>
                <button data-theme="green" class="theme-button control-button">Green</button>
                <button data-theme="indigo" class="theme-button control-button">Indigo</button>
            </div>
        </div>

        <div id="page-viewport" class="flex-grow">
            <div id="kb-container"></div>
        </div>
        
        <div id="navigation-controls" class="flex justify-between items-center mt-6">
            <button id="prev-button" class="nav-button">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                Previous
            </button>
            <div id="progress-indicator" class="text-sm font-medium" style="color: var(--text-muted);"></div>
            <button id="next-button" class="nav-button">
                Next
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
            </button>
        </div>
    </div>

    <script id="knowledge-base-data" type="application/json">
    {
      "knowledgeBase": {
        "id": "kb-waggoner-01",
        "title": "Adaptive Reader – Waggoner on Covenants",
        "summary": "The nature of divine covenants, particularly those established with Abraham, has profoundly shaped theological understanding across centuries. This article explores E. J. Waggoner's unique insights into Genesis 15 and 17, offering a critical lens through which to understand God's enduring promises versus human effort.",
        "entryPoints": [
          { "id": "point-01-context", "step": 1, "title": "Text & Context", "corePrinciple": "E.J. Waggoner's theology, rooted in a personal experience of Christ, sparked controversy but was unequivocally supported by Ellen G. White.", "development": "Ellet J. Waggoner's theological understanding was profoundly shaped by a personal revelation of Christ crucified for him in 1882. He resolved to articulate God's love for individual sinners as revealed in Scripture. His teachings, particularly on justification by faith, sparked considerable controversy within the Seventh-day Adventist Church after the 1888 Minneapolis General Conference. Despite this, his influential work, The Everlasting Covenant, faced publication barriers due to 'prejudice' from church leaders who opposed his views.", "scriptureReferences": [], "keyQuote": "Ellen G. White stated that leaders were 'spending your investigative powers for naught to produce a position on the covenants to vary from the position that Brother Waggoner has presented.'", "tags": ["waggoner", "history", "controversy", "ellen-white"] },
          { "id": "point-02-reading", "step": 2, "title": "Waggoner’s Reading of Genesis", "corePrinciple": "Waggoner distinguished between God's unilateral promise in Genesis 15 (faith) and the subsequent sign in Genesis 17 (a reminder against self-effort).", "development": "Waggoner's interpretation hinges on a clear distinction between God's promise, accepted by faith, and the subsequent sign of that promise. The foundation is in Genesis 15, where Abraham 'believed in the Lord; and He counted it to him for righteousness.' The covenant ratification, where God alone passed between the divided pieces, demonstrated God’s unilateral guarantee. In contrast, the sign of circumcision in Genesis 17 was a 'seal of the righteousness of the faith' (Romans 4:11) and a reminder of Abraham's 'mistake' with Hagar, warning against achieving God's promise 'by the flesh.' True circumcision, therefore, meant having 'no confidence in the flesh.'", "scriptureReferences": [ { "citation": "Genesis 15:6", "text": "And he believed in the Lord; and he counted it to him for righteousness.", "relevance": "The foundational moment of Abraham's justifying faith, preceding any sign or work." }, { "citation": "Romans 4:11", "text": "And he received the sign of circumcision, a seal of the righteousness of the faith which he had yet being uncircumcised...", "relevance": "Explains that circumcision was a sign of a righteousness already possessed by faith." } ], "keyQuote": "The sign [of circumcision] brought nothing to its possessor and was rendered a false sign unless the righteousness of faith was in the heart.", "tags": ["genesis-15", "genesis-17", "faith", "circumcision", "unilateral-covenant"] },
          { "id": "point-03-contrast", "step": 3, "title": "Contrast with Mainstream Views", "corePrinciple": "Waggoner's view challenged prevailing interpretations by focusing on the 'condition' of faith versus self-effort, rather than a simple temporal distinction of covenants.", "development": "Mainstream views often emphasized a temporal distinction between covenants—before or after the cross—rather than Waggoner's 'condition' or 'attitude' of self-effort versus faith. Waggoner maintained that the Sinaitic covenant itself 'contained no provisions for pardon of sins,' and that forgiveness was always secured by virtue of the promised sacrifice of Christ. One prominent misreading, as highlighted by Mike Colburn, is in Ellen G. White’s Patriarchs and Prophets, which suggests Abraham made a vow of 'perpetual obedience' in Genesis 15, creating a bilateral covenant. This contrasts sharply with Waggoner's emphasis on God's unilateral action and Abraham's passive reception by faith.", "scriptureReferences": [ { "citation": "Hebrews 10:4", "text": "For it is not possible that the blood of bulls and of goats should take away sins.", "relevance": "Supports Waggoner's view that the Sinaitic system pointed to Christ's sacrifice and did not contain pardon in itself." } ], "keyQuote": "The two covenants are not matters of time, but of condition.", "tags": ["theology", "sinaitic-covenant", "bilateral", "great-controversy"] },
          { "id": "point-04-implications", "step": 4, "title": "Implications for SDA Theology", "corePrinciple": "Waggoner’s exegesis redefines righteousness as a divine gift enabling obedience, and key doctrines like the Sabbath as a rest in God's power.", "development": "Waggoner’s meticulous exegesis carries profound implications. His insistence that righteousness is 'obtained only through faith in Christ' positions justification as an act where God's righteousness is 'put into and upon the man,' enabling genuine obedience as a result. The law is thus 'established by' faith, not abolished. The Sabbath becomes a profound symbol of resting in God's power, 'the absolute rest that comes from perfect faith in the power of God to create a new man.' Furthermore, Waggoner's teaching emphasizes that true Israel is defined by individual faith in Christ, encompassing both Jews and Gentiles, broadening the scope of God's people beyond mere national lineage.", "scriptureReferences": [], "keyQuote": "Faith is intensely active and the source of all spiritual activity.", "tags": ["righteousness-by-faith", "sabbath", "law", "israel", "salvation"] },
          { "id": "point-05-terms", "step": 5, "title": "Key Terms", "corePrinciple": "Understanding Waggoner's specific definitions is crucial to grasping his theological framework.", "development": "", "scriptureReferences": [], "keyQuote": "", "tags": ["definitions", "glossary", "theology"] },
          { "id": "point-06-takeaways", "step": 6, "title": "Key Takeaways", "corePrinciple": "Waggoner's theology centers on God's unilateral grace, received by faith, which reorients the understanding of law, salvation, and the identity of God's people.", "development": "", "scriptureReferences": [], "keyQuote": "", "tags": ["summary", "conclusion", "grace", "faith"] }
        ]
      }
    }
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let currentIndex = 0;
            const data = JSON.parse(document.getElementById('knowledge-base-data').textContent).knowledgeBase;
            const totalPages = data.entryPoints.length;

            const appContainer = document.getElementById('app-container');
            const container = document.getElementById('kb-container');
            const prevButton = document.getElementById('prev-button');
            const nextButton = document.getElementById('next-button');
            const progressIndicator = document.getElementById('progress-indicator');
            const darkModeToggle = document.getElementById('dark-mode-toggle');

            const themes = {
                blue: { '--accent-color': '#2563eb', '--accent-color-text': '#1e3a8a', '--accent-color-light-bg': '#eff6ff' },
                green: { '--accent-color': '#16a34a', '--accent-color-text': '#14532d', '--accent-color-light-bg': '#f0fdf4' },
                indigo: { '--accent-color': '#4f46e5', '--accent-color-text': '#312e81', '--accent-color-light-bg': '#eef2ff' }
            };

            function applyAccentColor(themeName) {
                const theme = themes[themeName];
                for (const [key, value] of Object.entries(theme)) {
                    document.documentElement.style.setProperty(key, value);
                }
                localStorage.setItem('accentColor', themeName);
                updateButtonStates();
            }

            function applyDarkMode(isDark) {
                document.documentElement.classList.toggle('dark', isDark);
                localStorage.setItem('darkMode', isDark ? '1' : '0');
                updateButtonStates();
            }

            function applyView(viewName) {
                appContainer.className = `max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 w-full view-${viewName}`;
                localStorage.setItem('viewMode', viewName);
                if (viewName === 'page') {
                    goToPage(currentIndex);
                } else {
                    container.style.transform = 'none';
                }
                updateButtonStates();
            }

            function updateButtonStates() {
                const currentView = localStorage.getItem('viewMode') || 'page';
                const currentAccent = localStorage.getItem('accentColor') || 'blue';
                const isDark = localStorage.getItem('darkMode') === '1';

                document.querySelectorAll('#ui-switcher .ui-button').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.view === currentView);
                    btn.classList.toggle('inactive', btn.dataset.view !== currentView);
                });
                document.querySelectorAll('#theme-switcher .theme-button').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.theme === currentAccent);
                    btn.classList.toggle('inactive', btn.dataset.theme !== currentAccent);
                });
                darkModeToggle.classList.toggle('active', isDark);
                darkModeToggle.classList.toggle('inactive', !isDark);
            }

            function updateNavControls() {
                prevButton.disabled = currentIndex === 0;
                nextButton.disabled = currentIndex === totalPages - 1;
                progressIndicator.textContent = `Step ${currentIndex + 1} of ${totalPages}`;
            }

            function goToPage(index) {
                if (index < 0 || index >= totalPages) return;
                currentIndex = index;
                container.style.transform = `translateX(-${currentIndex * 100}%)`;
                if (localStorage.getItem('viewMode') === 'page') {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
                updateNavControls();
            }

            function render() {
                document.getElementById('main-title').textContent = data.title;
                document.getElementById('main-summary').textContent = data.summary;
                container.innerHTML = data.entryPoints.map(entry => {
                    const scripturesHTML = (entry.scriptureReferences || []).map(ref => `
                        <div class="p-4 rounded-r-lg mb-4 border-l-4" style="background-color: var(--bg-scripture); border-color: var(--border-quote);">
                            <p class="font-bold" style="color: var(--text-heading);">${ref.citation}</p>
                            <p class="italic mt-1" style="color: var(--text-main);">"${ref.text}"</p>
                            <p class="text-sm mt-2" style="color: var(--text-muted);">${ref.relevance}</p>
                        </div>`).join('');
                    const quoteHTML = entry.keyQuote ? `
                        <blockquote class="quote-block border-l-4 pl-4 py-2 my-6">
                            <p class="text-lg italic font-medium" style="color: var(--text-main);">"${entry.keyQuote}"</p>
                        </blockquote>` : '';
                    
                    let contentHTML = `
                        <p class="leading-relaxed mb-6" style="color: var(--text-main);">${entry.development}</p>
                        ${scripturesHTML}
                        ${quoteHTML}`;
                    
                    if (entry.id === 'point-05-terms') {
                        contentHTML = `<ul class="space-y-4">
                            <li><strong class="key-term">Unilateral Covenant:</strong> An agreement where only one party makes the promises.</li>
                            <li><strong class="key-term">Righteousness of Faith:</strong> God's act of counting one righteous through belief, enabling obedience.</li>
                            <li><strong class="key-term">Old Covenant (Waggoner's view):</strong> A human-centric disposition of self-effort.</li>
                            <li><strong class="key-term">New Covenant (Waggoner's view):</strong> The everlasting covenant of God's unconditional promise.</li>
                            <li><strong class="key-term">Sign of Circumcision (Waggoner's view):</strong> A token to remind of the impossibility of self-righteousness.</li>
                        </ul>`;
                    } else if (entry.id === 'point-06-takeaways') {
                        contentHTML = `<ul class="space-y-4 bullet-list">
                            <li class="relative pl-6">Waggoner establishes salvation as a gift received by belief in God's unilateral promise, not human effort.</li>
                            <li class="relative pl-6">His views challenged contemporaries by highlighting a 'condition' of trust in God's grace versus reliance on self.</li>
                            <li class="relative pl-6">This understanding redefines key doctrines, portraying the law as a revealer of sin and the Sabbath as a rest in God's power.</li>
                        </ul>`;
                    }

                    return `<div class="kb-card p-2">
                        <div class="rounded-xl shadow-md flex-grow flex flex-col h-full" style="background-color: var(--bg-card);">
                            <div class="card-content-wrapper p-6 sm:p-8">
                                <div class="flex items-start sm:items-center space-x-4 mb-4">
                                    <div class="step-circle">${entry.step}</div>
                                    <h2 class="text-2xl font-bold" style="color: var(--text-heading);">${entry.title}</h2>
                                </div>
                                <p class="core-principle text-lg font-semibold p-4 rounded-lg mb-6">${entry.corePrinciple}</p>
                                ${contentHTML}
                            </div>
                        </div>
                    </div>`;
                }).join('');
            }

            // --- Event Listeners ---
            document.getElementById('ui-switcher').addEventListener('click', e => {
                if (e.target.matches('.ui-button')) applyView(e.target.dataset.view);
            });
            document.getElementById('theme-switcher').addEventListener('click', e => {
                if (e.target.matches('.theme-button')) applyAccentColor(e.target.dataset.theme);
            });
            darkModeToggle.addEventListener('click', () => {
                applyDarkMode(!document.documentElement.classList.contains('dark'));
            });
            prevButton.addEventListener('click', () => goToPage(currentIndex - 1));
            nextButton.addEventListener('click', () => goToPage(currentIndex + 1));

            // --- Initialization ---
            render();
            const savedView = localStorage.getItem('viewMode') || 'page';
            const savedAccent = localStorage.getItem('accentColor') || 'blue';
            const savedDarkMode = localStorage.getItem('darkMode') === '1';
            
            applyDarkMode(savedDarkMode);
            applyAccentColor(savedAccent);
            applyView(savedView); // This also calls goToPage if needed
        });
    </script>

</body>
</html>


